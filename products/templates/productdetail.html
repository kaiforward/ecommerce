{% extends "base.html" %}

{% load static %}

{% block content %}

<div class="rowcolcontainer">
	<div class="productbox">
		<div id="carouselIndicators" class="carousel mycarousel slide" data-ride="carousel" style="width:100%;">
			<ol class="carousel-indicators">
				<li data-target="#carouselIndicators" data-slide-to="0" class="active"></li>
				<li data-target="#carouselIndicators" data-slide-to="1"></li>
				<li data-target="#carouselIndicators" data-slide-to="2"></li>
			</ol>
			<div class="carousel-inner" role="listbox">
				<!-- using FOO_set allows objects to access related foreign key objects -->
				{% for photo in product.photo_set.all %}
					<!-- for the carousel to work we use if statement to add active class to first item only -->
					<div class="carousel-item {% if forloop.first %} active{% endif %}">
				  		<img class="d-block productfocusimg" src="/media/{{ photo.image }}">
					</div>		
				{% endfor %}
			</div>
			<a class="carousel-control-prev color" href="#carouselIndicators" role="button" data-slide="prev">
				<i class="fa fa-chevron-left"></i>
			</a>
			<a class="carousel-control-next color" href="#carouselIndicators" role="button" data-slide="next">
				<i class="fa fa-chevron-right"></i>
			</a>
		</div>
	</div>	
	<div class="productbox">
		<div class="productinfo">
			<h3>{{ product.name }}</h3>
			<!-- use safe tag for description as admin users only will input product descriptions. Allows html rendering from tinyMCE -->
			<div>
				{{ product.description|safe }}
			</div>
			<div class="infowrap">
				<p class="productinfobox">Price:</p>
				<p class="productinfobox">Â£{{ product.price }}</p>
			</div>
			<div class="infowrap">
				<p class="productinfobox">Stock Available:</p>
				<p class="productinfobox">{{ product.stock }}</p>
			</div>
			<div class="colcontainer">
			{% if product.variant %}
				{{ product.variant }}				
				<select class="myselect" name="variantlist" form="form">
					<!-- using FOO_set allows objects to access related foreign key objects using name or related name -->
					{% for attribute in product.variant.productattribute_set.all %}
						<option value="{{ attribute.attribute }}">{{ attribute.attribute }}</option>
		  			{% endfor %}
				</select>		
			{% endif %}
			{% if product.variant_two %}
				{{ product.variant_two }}				
				<select class="myselect" name="variantlist" form="form">
					<!-- using FOO_set allows objects to access related foreign key objects using name or related name -->
					{% for attribute in product.variant_two.productattribute_set.all %}
						<option value="{{ attribute.attribute }}">{{ attribute.attribute }}</option>
		  			{% endfor %}
				</select>		
			{% endif %}
			{% if product.variant_three %}
				{{ product.variant_three }}				
				<select class="myselect" name="variantlist" form="form">
					<!-- using FOO_set allows objects to access related foreign key objects using name or related name -->
					{% for attribute in product.variant_three.productattribute_set.all %}
						<option value="{{ attribute.attribute }}">{{ attribute.attribute }}</option>
		  			{% endfor %}
				</select>		
			{% endif %}
			</div>
			<form class="myform" action="{% url 'cart_add' product.pk %}" method="post">
				{{ cart_product_form }}
				{% csrf_token %}
				<input type="submit" name="" value="Add To Cart">
			</form>
		</div>
	</div>
</div>

{% endblock %}